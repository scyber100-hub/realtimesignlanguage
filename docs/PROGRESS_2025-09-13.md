# Progress Summary (2025-09-13)

Follow-up work based on 2025-09-12 notes. Focused on safe, incremental improvements without destabilizing core services.

## Done
- Dashboard UX
  - Added RL ratio badge next to replace ratio (reads `rate_limit_ratio` from `/stats`).
  - Stabilized badge color changes using simple moving averages + 5% hysteresis for:
    - Replace ratio (window 20)
    - Latency p90 (window 10)
    - Rate-limit ratio (window 20)
- Streaming partials debounce
  - Suppress duplicate partials even when only whitespace/punctuation differ (trim/collapse whitespace and drop trailing punctuation `, . ! ? … ·`).

## Notes
- No server API surface changes were required for the dashboard updates; it uses existing `/stats` fields.
- The debounce change is conservative and only affects `partial` messages; `final` messages are unchanged.

## Next (suggested)
1) Safer replace window
   - Add `MAX_REPLACE_FUTURE_MS` to settings and limit `timeline.replace` slices to a bounded future window (e.g., 1200ms) to reduce jitter.
2) Per-session telemetry
   - Track per-session latency ring and rate-limit counters for session-level p90 and RL ratio in `/sessions_full`.
3) Face/gaze channel patterns
   - Expand `_FACE_CLIPS`/`_GAZE_CLIPS` mappings and add presets per `docs/UNITY_PRESETS.md`.
4) Alerts
   - Hook Grafana panels to Prometheus metrics and add alert rules matching current thresholds.

